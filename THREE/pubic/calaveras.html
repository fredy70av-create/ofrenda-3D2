<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Calaveras 3D</title>
  <style>
    body { margin: 0; overflow: hidden; }
    canvas { display: block; }
  </style>
</head>
<body>
<canvas id="canvasCalaveras"></canvas>

<script type="module">
import * as THREE from './three.module.js';
import { OrbitControls } from './OrbitControls.js';

// ---------- RENDER ----------
const renderizador = new THREE.WebGLRenderer({
  canvas: document.getElementById('canvasCalaveras'),
  antialias: true
});
renderizador.setPixelRatio(window.devicePixelRatio);
renderizador.setSize(window.innerWidth, window.innerHeight);
renderizador.setClearColor(0x000000);
renderizador.shadowMap.enabled = true;

// ---------- ESCENA Y CÁMARA ----------
const escena = new THREE.Scene();
const camara = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 2000);
camara.position.set(0, 5, 10);
camara.lookAt(0, 2, 0);
escena.add(camara);

// ---------- CONTROLES ----------
const controles = new OrbitControls(camara, renderizador.domElement);
controles.enableDamping = true;
controles.dampingFactor = 0.05;

// ---------- LUZ ----------
escena.add(new THREE.AmbientLight(0xffffff, 0.4));
const luzPrincipal = new THREE.PointLight(0xffffff, 1.5, 100);
luzPrincipal.position.set(5, 10, 5);
escena.add(luzPrincipal);

// ---------- FUNCIÓN CALAVERAS ----------
const crearCalaveritaRealista = (escena, x, y, z) => {
  const cabezaMat = new THREE.MeshStandardMaterial({ color: 0xffffff });
  const cabeza = new THREE.Mesh(new THREE.SphereGeometry(0.55, 32, 32), cabezaMat);
  cabeza.position.set(x, y, z);
  escena.add(cabeza);

  const mandMat = new THREE.MeshStandardMaterial({ color: 0xffffff });
  const mandibula = new THREE.Mesh(new THREE.BoxGeometry(0.5, 0.2, 0.3), mandMat);
  mandibula.position.set(x, y - 0.45, z + 0.05);
  escena.add(mandibula);

  const ojoMat = new THREE.MeshStandardMaterial({ color: 0x000000 });
  const ojo1 = new THREE.Mesh(new THREE.SphereGeometry(0.1, 8, 8), ojoMat);
  const ojo2 = ojo1.clone();
  ojo1.position.set(x - 0.18, y + 0.1, z + 0.45);
  ojo2.position.set(x + 0.18, y + 0.1, z + 0.45);
  escena.add(ojo1, ojo2);

  const narizGeo = new THREE.ConeGeometry(.09, 1.1, 5);
  const nariz = new THREE.Mesh(narizGeo, ojoMat);
  nariz.position.set(x, y - 0.05, z + 0.25);
  nariz.rotation.x = Math.PI;
  escena.add(nariz);

  const pomuloMat = new THREE.MeshStandardMaterial({ color: 0xffffff });
  const pomulo1 = new THREE.Mesh(new THREE.SphereGeometry(0.07, 16, 16), pomuloMat);
  const pomulo2 = pomulo1.clone();
  pomulo1.position.set(x - 0.22, y, z + 0.15);
  pomulo2.position.set(x + 0.22, y, z + 0.15);
  escena.add(pomulo1, pomulo2);
};

// ---------- CREAR CALAVERAS ----------
crearCalaveritaRealista(escena, -2, 2.9, 0.8);
crearCalaveritaRealista(escena, 2, 2.9, 0.8);

// ---------- ANIMACIÓN ----------
const animate = () => {
  requestAnimationFrame(animate);
  controles.update();
  renderizador.render(escena, camara);
};
animate();

// ---------- AJUSTE DE PANTALLA ----------
window.addEventListener('resize', () => {
  camara.aspect = window.innerWidth / window.innerHeight;
  camara.updateProjectionMatrix();
  renderizador.setSize(window.innerWidth, window.innerHeight);
});
</script>
</body>
</html>
