<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Pan de Muerto</title>
  <style>body{margin:0;overflow:hidden;}canvas{display:block;}</style>
</head>
<body>
<canvas id="canvasPan"></canvas>
<script type="module">
import * as THREE from './js/three.module.js';
import { OrbitControls } from './js/OrbitControls.js';

const escena = new THREE.Scene();
const camara = new THREE.PerspectiveCamera(60, window.innerWidth/window.innerHeight, 0.1, 2000);
camara.position.set(0,10,30);
camara.lookAt(0,2,0);

const renderizador = new THREE.WebGLRenderer({canvas:document.getElementById('canvasPan'), antialias:true});
renderizador.setSize(window.innerWidth, window.innerHeight);
renderizador.setPixelRatio(window.devicePixelRatio);

const controles = new OrbitControls(camara, renderizador.domElement);
controles.enableDamping = true; controles.dampingFactor = 0.05;

const crearPan = (x,y,z)=>{
  const panMat = new THREE.MeshStandardMaterial({color:0xd2b48c});
  const pan = new THREE.Mesh(
    new THREE.SphereGeometry(0.9,32,32,0,Math.PI*2,0,Math.PI/2),
    panMat
  );
  pan.position.set(x,y,z);
  escena.add(pan);

  const huesitoMat = new THREE.MeshStandardMaterial({color:0xd2b48c});
  const posicionesHuesitos = [
    {x:0,z:0},{x:0.3,z:0},{x:-0.3,z:0},{x:0,z:0.3},{x:0,z:-0.3}
  ];
  posicionesHuesitos.forEach(pos=>{
    const huesito = new THREE.Mesh(new THREE.CylinderGeometry(0.05,0.05,0.4),huesitoMat);
    huesito.position.set(x+pos.x,y+0.2,z+pos.z);
    huesito.rotation.x=Math.PI/2;
    escena.add(huesito);
  });
};

crearPan(-1.5,1.8,1.5);
crearPan(0,1.8,1.5);
crearPan(1.5,1.8,1.5);

// Luz
escena.add(new THREE.AmbientLight(0xffffff,0.4));
const luz = new THREE.PointLight(0xffa95c,2,150);
luz.position.set(5,12,10);
escena.add(luz);

// Suelo
const suelo = new THREE.Mesh(new THREE.PlaneGeometry(120,120), new THREE.MeshStandardMaterial({color:0x2e2e2e}));
suelo.rotation.x = -Math.PI/2;
escena.add(suelo);

function animate(){
  requestAnimationFrame(animate);
  controles.update();
  renderizador.render(escena,camara);
}
animate();

window.addEventListener('resize',()=>{
  camara.aspect = window.innerWidth/window.innerHeight;
  camara.updateProjectionMatrix();
  renderizador.setSize(window.innerWidth, window.innerHeight);
});
</script>
</body>
</html>
